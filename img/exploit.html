<html>

<body>
    <script>
        const url = "http://127.0.0.1:1337/api/data";
        const sendGetRequest = async () => {
            try {
                const response = await fetch(url);
                const data = await response.text();
                data_json = JSON.parse(data);
                for (project in data_json['projects']) {
                    deleteProject(data_json['projects'][project]);

                }
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        };
        const deleteProject = async (project_name) => {
            url2 = "http://127.0.0.1:1337/api/delete-project";
            try {
                const response = await fetch(url2, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        project_name: project_name
                    })
                });
                const data = await response.text();
                console.log('Project deleted: ' + project_name);
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }
        sendGetRequest();
    </script>
</body>

</html>
